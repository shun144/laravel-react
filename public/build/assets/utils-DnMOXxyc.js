import{d}from"./app-CLtd0l1O.js";var n=[];for(var l=0;l<256;++l)n.push((l+256).toString(16).slice(1));function N(t,e=0){return(n[t[e+0]]+n[t[e+1]]+n[t[e+2]]+n[t[e+3]]+"-"+n[t[e+4]]+n[t[e+5]]+"-"+n[t[e+6]]+n[t[e+7]]+"-"+n[t[e+8]]+n[t[e+9]]+"-"+n[t[e+10]]+n[t[e+11]]+n[t[e+12]]+n[t[e+13]]+n[t[e+14]]+n[t[e+15]]).toLowerCase()}var u,U=new Uint8Array(16);function h(){if(!u&&(u=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!u))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return u(U)}var v=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const y={randomUUID:v};function x(t,e,s){if(y.randomUUID&&!e&&!t)return y.randomUUID();t=t||{};var o=t.random||(t.rng||h)();return o[6]=o[6]&15|64,o[8]=o[8]&63|128,N(o)}const _=async t=>{try{return(await d.post("/flow",{category:t})).data}catch(e){return console.log(e),-999}},q=async t=>{try{const e=await d.delete("/flow",{params:{flowId:t}});return!0}catch{return!1}},I=async t=>{try{return(await d.get("/flow-info",{params:{flow_id:t}})).data}catch(e){return console.log(e),{title:"",url:""}}},p=async(t,e,s,o,a,r,c,m)=>{const g=e.filter(i=>i.type===a),w=e.filter(i=>i.type===r);console.log(g);try{const i=await d.post("/flows",{flow_id:t,update_questions:JSON.stringify(g),update_results:JSON.stringify(w),update_edges:JSON.stringify(s),first_question_id:o,title:c,url:m});return console.log(i.data),!0}catch(i){return console.log(i),!1}},R=async(t,e,s,o,a,r)=>p(t,e,s,o,"questionNode","resultNode",a,r),f=async(t,e,s,o,a,r)=>p(t,e,s,o,"cityHeavenQuestionNode","cityHeavenResultNode",a,r),F=async t=>{const e=d.get("/question-nodes",{params:{flow_id:t}}),s=d.get("/result-nodes",{params:{flow_id:t}}),[o,a]=await Promise.all([e,s]),r=o.data.length?JSON.parse(o.data):[],c=a.data.length?JSON.parse(a.data):[];return[...r,...c]},J=async t=>{const e=await d.get("/edges",{params:{flow_id:t}});return e.data.length?JSON.parse(e.data):[]},O=()=>x();export{_ as a,I as b,f as c,q as d,F as e,J as f,O as g,R as h};
