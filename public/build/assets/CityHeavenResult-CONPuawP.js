import{q as G,r as y,b as N,j as s}from"./app-CjTn67dp.js";import{u as w}from"./store-B-ZsuUX1.js";import P from"./ResetButton-ChZp4yTk.js";/* empty css                */import S from"./Skelton-B61ushhW.js";import{u as j}from"./useQuery-C-IJqL6T.js";import k from"./GirlsView-BPKthvFi.js";import v from"./ApiError-DiomzGzu.js";import"./react-DQ1WawF1.js";import"./index-Cn1gg0GA.js";import"./iconBase-CSDIRjIh.js";import"./utils-BQ8AEStt.js";const R=({answerHistories:i})=>{var d,p;const{url:l}=G(),{id:c}=w(r=>r.currentQuestionnarie),n=async()=>{const r=window.location.origin;return(await N.get(`${r}${l}/cityheaven`)).data.girlsData},u=r=>{const g=i.reduce((t,e)=>[...t,...e.salesPointNos],[]),a=new Set(g),h=r.map(t=>{const e=t.salespoint_ids.filter(D=>a.has(D)).length;let o="NOTHING";return a.size===0?{...t,matchSalesPointNum:e,matchType:o}:(e===a.size?o="ALL":0<e&&e<a.size?o="PART":o="NOTHING",{...t,matchSalesPointNum:e,matchType:o})});return h.sort((t,e)=>e.matchSalesPointNum!==t.matchSalesPointNum?e.matchSalesPointNum-t.matchSalesPointNum:e.today_work_flg!==t.today_work_flg?e.today_work_flg?1:-1:e.diary_flg!==t.diary_flg?e.diary_flg?1:-1:e.review_flg!==t.review_flg?e.review_flg?1:-1:e.w_shukkin.filter(Boolean).length-t.w_shukkin.filter(Boolean).length),h},{data:m,isFetching:_,error:f}=j({queryKey:[`RespondentGirlsData${c}`],queryFn:n,staleTime:1e3*60*5,retry:!1}),x=(p=(d=f==null?void 0:f.response)==null?void 0:d.data)==null?void 0:p.message;return{processedGirlsData:y.useMemo(()=>m?u(m):[],[m,i]),isFetching:_,errorMessage:x}},H=()=>{const i=w(u=>u.answerHistories),{processedGirlsData:l,isFetching:c,errorMessage:n}=R({answerHistories:i});return n?s.jsx(v,{errorMessage:n}):c?s.jsx(S,{}):s.jsx(s.Fragment,{children:s.jsxs("div",{className:"h-full w-full flex flex-col justify-start items-center",children:[s.jsx(k,{girlsData:l}),s.jsx(P,{})]})})},Q=y.memo(H);export{Q as default};
