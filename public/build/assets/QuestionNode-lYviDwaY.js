import{r as m,j as e}from"./app-Bo7i6JCS.js";import{u as b,H as g,P as f}from"./index-BlTeKDJp.js";import{b as j}from"./utils-Cmb2_2w0.js";import w from"./ChoiceSourceHandle-DpfmfhiL.js";import{F as n,a as v}from"./index-Vh4xxwgf.js";import"./iconBase-CU--X7uj.js";const N=({id:l,data:s})=>{const{setEdges:a,updateNodeData:i,deleteElements:c}=b(),d=t=>{i(l,{...s,topic:t.currentTarget.value})},h=()=>{const t=j();i(l,{...s,choices:[...s.choices,{id:t,content:""}]})},u=(t,r)=>{s.choices.length>6||i(l,{...s,choices:s.choices.map(o=>o.id===r.id?{...o,content:t.currentTarget.value}:o)})},p=t=>{s.choices.length<=1||(i(l,{...s,choices:s.choices.filter(r=>r.id!=t.id)}),a(r=>r.filter(o=>o.sourceHandle!=t.id)))},x=()=>{c({nodes:[{id:l}]})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"rounded-t-md min-w-64 px-2",children:[e.jsx("div",{className:"text-white",children:"カスタムフロー用のノードです"}),e.jsx(g,{id:l,position:f.Left,type:"target",style:{cursor:"pointer"}}),e.jsxs("div",{className:"flex flex-col custom-drag-handle",children:[e.jsx("button",{className:"text-white hover:text-red-300 font-bold mb-1 rounded w-fit self-end text-sm",type:"button",onClick:x,children:e.jsx(n,{})}),e.jsx("input",{className:"placeholder-gray-400 rounded-t-md p-1 text-center bg-slate-500 text-white w-full border-none focus:ring-0",value:s.topic,placeholder:"質問を入力してください",onChange:t=>d(t)})]}),e.jsxs("div",{className:"bg-slate-800",children:[s.choices.map((t,r)=>e.jsxs("div",{className:"flex justify-between p-1 text-white bg-slate-800",children:[e.jsx("input",{className:"placeholder-gray-600 border-blue-100 focus:border-blue-400 focus:ring-0 bg-transparent text-white w-full",value:t.content,placeholder:"選択肢を入力してください",onChange:o=>u(o,t)}),e.jsx("button",{className:"rounded-md bg-slate-800 p-1 border border-transparent text-center text-white transition-all shadow-sm hover:shadow-lg focus:bg-slate-700 focus:shadow-none active:bg-slate-700 hover:bg-slate-700 active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button",onClick:()=>p(t),children:e.jsx(n,{className:"text-[10px]"})}),e.jsx(w,{id:t.id,connectionLimit:1,style:{top:75+51*r}})]},t.id)),e.jsx("div",{className:"p-1",children:s.choices.length<6&&e.jsxs("button",{className:"text-gray-600 border border-gray-600 hover:text-gray-300 hover:border-gray-300 font-bold mt-1 w-full text-[10px] py-1 flex justify-center items-center gap-1",onClick:h,children:[e.jsx(v,{}),e.jsx("p",{children:"選択肢追加"})]})})]})]})})},k=m.memo(N);export{k as default};
