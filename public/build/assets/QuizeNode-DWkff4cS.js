import{r as N,j as t}from"./app-CBSrSIhT.js";import{b,H as f,P as a}from"./index-BxZoQ102.js";import z from"./ChoiceSourceHandleProps-r9vvmzxY.js";import{a as l,b as y}from"./index-SudRYcli.js";const j=()=>[{quizeNo:"quize-1",topic:"好きな動物は？",choices:[{choiceNo:"quize-1-1",content:"犬"},{choiceNo:"quize-1-2",content:"猫"},{choiceNo:"quize-1-3",content:"うさぎ"}]},{quizeNo:"quize-2",topic:"好きな季節は？",choices:[{choiceNo:"quize-2-1",content:"春"},{choiceNo:"quize-2-2",content:"夏"},{choiceNo:"quize-2-3",content:"秋"},{choiceNo:"quize-2-4",content:"冬"}]}],q=()=>[{resultNo:"result-1",message:"あなたのタイプはAさんです"}],E=()=>{const o=j().map((c,r)=>({id:c.quizeNo,position:{x:r*350,y:r*200},data:c,type:"quizeNode",dragHandle:".custom-drag-handle"})),e=q().map((c,r)=>({id:c.resultNo,position:{x:(r+1)*350,y:0},data:c,type:"resultNode",dragHandle:".custom-drag-handle"}));return[...o,...e]},T=()=>[{id:"edge-1",type:"smoothstep",source:"quize-1",sourceHandle:"quize-1-1",target:"result-1",targetHandle:"result-1"},{id:"edge-2",type:"smoothstep",source:"quize-1",sourceHandle:"quize-1-2",target:"result-1",targetHandle:"result-1"},{id:"edge-3",type:"smoothstep",source:"quize-1",sourceHandle:"quize-1-3",target:"quize-2",targetHandle:"quize-2"}],F=(o,e)=>{const c=Math.max(...o.map(r=>parseInt(r.id.replace(e,""))||-99));return`${e}${c+1}`},w=(o,e)=>{const c=Math.max(...o.map(r=>parseInt(r.choiceNo.replace(e,""))||-99));return`${e}${c+1}`},v=({id:o,data:e})=>{const{setEdges:c,updateNodeData:r,deleteElements:u}=b(),d=s=>{r(o,{...e,topic:s.currentTarget.value})},h=()=>{const s=w(e.choices,`${o}-`);r(o,{...e,choices:[...e.choices,{choiceNo:s,content:""}]})},p=(s,i)=>{e.choices.length>=6||r(o,{...e,choices:e.choices.map(n=>n.choiceNo===i?{choiceNo:i,content:s.currentTarget.value}:n)})},g=s=>{e.choices.length<=1||(r(o,{...e,choices:e.choices.filter(i=>i.choiceNo!=s)}),c(i=>i.filter(n=>n.sourceHandle!=s)))},m=()=>{u({nodes:[{id:o}]})};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"rounded-t-md min-w-64 px-2",children:[t.jsx(f,{id:o,position:a.Left,type:"target",style:{cursor:"pointer"}}),t.jsxs("div",{className:"flex flex-col custom-drag-handle",children:[t.jsx("button",{className:"text-white hover:text-red-300 font-bold mb-1 rounded w-fit self-end text-sm",type:"button",onClick:m,children:t.jsx(l,{})}),t.jsx("input",{className:"placeholder-gray-400 rounded-t-md p-1 text-center bg-slate-500 text-white w-full border-none focus:ring-0",value:e.topic,placeholder:"質問を入力してください",onChange:s=>d(s)})]}),t.jsxs("div",{className:"bg-slate-800",children:[e.choices.map(({choiceNo:s,content:i},n)=>t.jsxs("div",{className:"flex justify-between p-1 text-white bg-slate-800",children:[t.jsx("input",{className:"placeholder-gray-600 border-blue-100 focus:border-blue-400 focus:ring-0 bg-transparent text-white w-full",value:i,placeholder:"選択肢を入力してください",onChange:x=>p(x,s)}),t.jsx("button",{className:"rounded-md bg-slate-800 p-1 border border-transparent text-center text-white transition-all shadow-sm hover:shadow-lg focus:bg-slate-700 focus:shadow-none active:bg-slate-700 hover:bg-slate-700 active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button",onClick:()=>g(s),children:t.jsx(l,{className:"text-[10px]"})}),t.jsx(z,{id:s,type:"source",position:a.Right,connectionLimit:1,style:{top:75+51*n}})]},s)),t.jsx("div",{className:"p-1",children:t.jsxs("button",{className:"text-gray-600 border border-gray-600 hover:text-gray-300 hover:border-gray-300 font-bold mt-1 w-full text-[10px] py-1 flex justify-center items-center gap-1",onClick:h,children:[t.jsx(y,{}),t.jsx("p",{children:"選択肢追加"})]})})]})]})})},H=N.memo(v),P=Object.freeze(Object.defineProperty({__proto__:null,default:H},Symbol.toStringTag,{value:"Module"}));export{H as Q,T as a,F as b,P as c,E as g};
