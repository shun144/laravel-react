import{r as s,q as U,j as e,Y as S,a as $}from"./app-BMXDJVyd.js";import{A as R}from"./AuthenticatedLayout-CzhUtBeq.js";import{d as F}from"./utils-D5TGypcN.js";import L from"./CreateModal-S-8KrZ45.js";import{I as B,n as m}from"./index-BqrmyCi8.js";import{i as T,p as o,F as _}from"./index-Ch_NWwRx.js";/* empty css                           */import A from"./EditModal-AxUe_CkO.js";import"./ApplicationLogo-D9rgw6S1.js";import"./ResponsiveNavLink-IaHqs08y.js";import"./transition-MkT8-x2S.js";import"./Modal-ndQRzq1Q.js";import"./TextInput-egONtHGp.js";import"./InputLabel-DWhsxtQZ.js";const f="menu-id",D=({initialFlows:r,isRegisteredApiCredential:j})=>{const[d,n]=s.useState(r),[g,c]=s.useState(!1),[w,x]=s.useState(!1),[b,h]=s.useState(""),[y,u]=s.useState(""),[N,v]=s.useState(0),{props:p}=U();s.useEffect(()=>{n(r)},[r]);const{show:M}=_({id:f}),C=s.useCallback(t=>{const l=t.props.flowId;(async()=>{try{const a=await F(l)}catch{}})(),n(a=>a.filter(i=>i.id!=l))},[n]),k=s.useCallback(({props:t})=>{h(t.title),u(t.url),v(t.flowId),x(!0)},[h,u]),I=async t=>{try{await navigator.clipboard.writeText(`${window.location.origin}/${p.auth.user.english_name}/${t.props.url}`),m.success("URLをクリップボードにコピーしました",{duration:3e3})}catch{m.error("URLのコピーに失敗しました",{duration:3e3})}},O=(t,l,a,i)=>{M({event:t,props:{flowId:l,title:a,url:i}})};return e.jsxs(R,{header:e.jsxs("div",{className:"flex justify-between items-center py-3",children:[e.jsx("h2",{className:"font-bold text-xl text-slate-600 leading-tight",children:"診 断 一 覧"}),e.jsx("button",{className:"bg-indigo-500 py-2 px-3 text-white rounded shadow transition-all hover:bg-indigo-600",onClick:()=>c(!0),children:"診 断 作 成"})]}),children:[e.jsx(S,{title:"Board"}),e.jsx("div",{className:"flex justify-center items-start h-full pt-20",children:d.length>0?e.jsx("div",{className:"grid grid-cols-5 gap-8",children:e.jsx(e.Fragment,{children:d.map(({id:t,category:l,title:a,url:i})=>e.jsx($,{onContextMenu:E=>O(E,t,a,i),href:`flow/${t}`,as:"button",type:"button",className:`w-56 h-44 rounded-lg shadow border inline-block bg-white overflow-hidden select-none\r
                    hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-slate-200 transition-all duration-300 py-2`,children:e.jsxs("div",{className:"w-full h-full flex flex-col justify-center items-center",children:[e.jsx("div",{className:"w-full h-1/6 pl-2 flex justify-start items-center",children:e.jsx("div",{className:`${l==="standard"?"bg-emerald-100 text-emerald-600":"bg-rose-100 text-pink-500"} 
                        inline-flex rounded-md h-full justify-center items-center text-xs  px-2.5 py-0.5`,children:l==="standard"?"標準":"シティヘブン"})}),e.jsx("div",{className:"w-full h-4/6 ",children:e.jsx("div",{className:"px-2 h-full flex flex-col justify-start pt-4",children:e.jsx("p",{className:"text-slate-700 text-lg break-all leading-tight text-start",children:a})})}),e.jsx("div",{className:"w-full h-1/6",children:e.jsxs("p",{className:"px-2  text-slate-400 text-[11px] break-all leading-tight text-start",children:[window.location.origin,"/",p.auth.user.english_name,"/",i]})})]})},t))})}):e.jsx("div",{className:"w-full h-full flex justify-center items-start",children:e.jsx("div",{className:"text-3xl font-bold select-none text-slate-400/80",children:"診断作成ボタンから診断を作成してください"})})}),e.jsx(L,{isOpenModal:g,setIsOpenModal:c,isRegisteredApiCredential:j}),e.jsx(A,{isOpenModal:w,setIsOpenModal:x,editTitle:b,editUrl:y,flowId:N}),e.jsx(B,{position:"bottom-right",reverseOrder:!1}),e.jsxs(T,{id:f,children:[e.jsx(o,{closeOnClick:!0,onClick:t=>k(t),children:"タイトル/URLの変更"}),e.jsx(o,{closeOnClick:!0,onClick:t=>I(t),children:"URLのコピー"}),e.jsx(o,{closeOnClick:!0,onClick:t=>C(t),children:"削除"})]})]})},te=s.memo(D);export{te as default};
