import{q as k,r as _,b as G,j as r}from"./app-CSjHWPvI.js";import{u as y}from"./store-BrSRrGk4.js";import S from"./ResetButton-BSQRUmI1.js";/* empty css                */import v from"./Skelton-rvksto8C.js";import{u as R}from"./useQuery-DdU-s7VM.js";import E from"./GirlsView-Bw6QPwDA.js";import F from"./ApiError-Br_S416l.js";import"./react-B7rrIsss.js";import"./index-CC75-MUc.js";import"./iconBase-C4QmxV03.js";import"./utils-DpLxWI1j.js";import"./index-BGbAwYKf.js";const P=({answerHistories:n})=>{var m,d;const{url:a}=k(),{id:l}=y(s=>s.currentQuestionnarie),i=async()=>{const s=window.location.origin;return(await G.get(`${s}${a}/cityheaven`)).data.girlsData},c=s=>{const o={};n.forEach(({salesPointNos:t})=>{t.forEach(e=>{o[e]=(o[e]||0)+1})});const x=new Set(Object.keys(o)),g=s.map(t=>{const e=t.salespoint_ids.reduce((p,j)=>p+(o[j]||0),0),D=new Set(t.salespoint_ids.filter(p=>p!==null)).isSubsetOf(x);return{...t,earn_point:e,isFullMatch:D}});return g.sort((t,e)=>e.today_work_flg!==t.today_work_flg?e.today_work_flg?1:-1:e.earn_point!==t.earn_point?e.earn_point-t.earn_point:e.diary_flg!==t.diary_flg?e.diary_flg?1:-1:e.review_flg!==t.review_flg?e.review_flg?1:-1:e.w_shukkin.filter(Boolean).length-t.w_shukkin.filter(Boolean).length),g},{data:u,isFetching:h,error:f}=R({queryKey:[`RespondentGirlsData${l}`],queryFn:i,staleTime:1e3*60*5,retry:!1}),w=(d=(m=f==null?void 0:f.response)==null?void 0:m.data)==null?void 0:d.message;return{processedGirlsData:_.useMemo(()=>u?c(u):[],[u,n]),isFetching:h,errorMessage:w}},M=()=>{const n=y(c=>c.answerHistories),{processedGirlsData:a,isFetching:l,errorMessage:i}=P({answerHistories:n});return i?r.jsx(F,{errorMessage:i}):l?r.jsx(v,{}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"h-full w-full flex flex-col justify-start items-center",children:[r.jsx(E,{girlsData:a}),r.jsx(S,{})]})})},I=_.memo(M);export{I as default};
