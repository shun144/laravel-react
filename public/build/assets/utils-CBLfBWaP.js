import{c as u}from"./app-BpPJ0wDp.js";var n=[];for(var l=0;l<256;++l)n.push((l+256).toString(16).slice(1));function w(t,e=0){return(n[t[e+0]]+n[t[e+1]]+n[t[e+2]]+n[t[e+3]]+"-"+n[t[e+4]]+n[t[e+5]]+"-"+n[t[e+6]]+n[t[e+7]]+"-"+n[t[e+8]]+n[t[e+9]]+"-"+n[t[e+10]]+n[t[e+11]]+n[t[e+12]]+n[t[e+13]]+n[t[e+14]]+n[t[e+15]]).toLowerCase()}var c,v=new Uint8Array(16);function U(){if(!c&&(c=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!c))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return c(v)}var x=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const g={randomUUID:x};function S(t,e,o){if(g.randomUUID&&!e&&!t)return g.randomUUID();t=t||{};var s=t.random||(t.rng||U)();return s[6]=s[6]&15|64,s[8]=s[8]&63|128,w(s)}const q=async t=>{try{const e=await u.delete("/flow",{params:{flowId:t}});return!0}catch{return!1}},I=async(t,e,o,s,a,r)=>y(t,e,o,s,"questionNode","resultNode",a,r),_=async(t,e,o,s,a,r)=>y(t,e,o,s,"cityHeavenQuestionNode","cityHeavenResultNode",a,r);async function y(t,e,o,s,a,r,d,p){const m=e.filter(i=>i.type===a),N=e.filter(i=>i.type===r);try{const i=await u.post("/flows",{flow_id:t,update_questions:JSON.stringify(m),update_results:JSON.stringify(N),update_edges:JSON.stringify(o),first_question_id:s,title:d,url:p});return!0}catch(i){return console.log(i),!1}}const R=async t=>{const e=u.get("/question-nodes",{params:{flow_id:t}}),o=u.get("/result-nodes",{params:{flow_id:t}}),[s,a]=await Promise.all([e,o]),r=s.data.length?JSON.parse(s.data):[],d=a.data.length?JSON.parse(a.data):[];return[...r,...d]},J=async t=>{const e=await u.get("/edges",{params:{flow_id:t}});return e.data.length?JSON.parse(e.data):[]},O=()=>S();export{R as a,J as b,_ as c,q as d,I as e,O as g};
