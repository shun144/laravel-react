import{r as o,j as t}from"./app-Fxrr18RL.js";import{b as p,H as g,P as n}from"./index-BdOFtew_.js";import b from"./ChoiceSourceHandle-ClxD4gBg.js";import{g as j}from"./utils-DtvS6Fzu.js";import{u as y}from"./store-B-sIPZ31.js";import{F as v,a as N}from"./index-BFep6aaj.js";import{G as w}from"./iconBase-DN5vp9AL.js";import C from"./SalesPointSelect-CdQRQ3wS.js";import{showDisplayMenu as k}from"./FlowMenu-BUgNQdWB.js";import"./react-3fYLzgl2.js";import"./ReactContexify.min-bouRtaFS.js";function H(r){return w({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"},child:[]}]})(r)}const F=({id:r,data:s})=>{const m=y(e=>e.firstNodeId),{setEdges:u,updateNodeData:l}=p(),d=o.useCallback(e=>{l(r,{...s,topic:e.currentTarget.value})},[l,r,s]),x=o.useCallback(()=>{const e=j();l(r,{...s,choices:[...s.choices,{id:e,content:""}]})},[l,r,s]),h=o.useCallback((e,i)=>{if(s.choices.length>6)return;const a=e.currentTarget.value;l(r,{...s,choices:s.choices.map(c=>c.id===i.id?{...c,content:a}:c)})},[l,r,s]),f=o.useCallback(e=>{s.choices.length<=1||(l(r,{...s,choices:s.choices.filter(i=>i.id!=e.id)}),u(i=>i.filter(a=>a.sourceHandle!=e.id)))},[l,r,s]);return t.jsxs("div",{className:`rounded-md w-72 pb-7 bg-slate-100 shadow-lg
      ${m===r&&"border-2 border-orange-300"}`,children:[t.jsx("div",{className:"custom-drag-handle rounded-t-md bg-slate-900 flex justify-end items-center h-8 pr-2",children:t.jsx(H,{className:" h-full text-slate-400 text-sm cursor-pointer transition-all hover:text-slate-300 hover:bg-slate-800 rounded",onClick:e=>k(e,r)})}),t.jsxs("div",{className:"flex flex-col justify-center items-center pt-2 px-4 ",children:[t.jsxs("div",{className:"w-full flex flex-col justify-center items-center relative",children:[t.jsx("label",{htmlFor:"message",className:"self-start block text-sm font-medium text-slate-600",children:"質問内容"}),t.jsx("textarea",{id:"message",rows:3,className:"block resize-none p-2.5 w-full text-sm text-gray-900 placeholder-gray-300 bg-gray-50 rounded-sm border border-gray-300 focus:ring-slate-400 focus:border-slate-400",value:s.topic,onChange:e=>d(e),placeholder:"質問内容を入力してください"}),t.jsx(g,{id:r,position:n.Left,type:"target",style:{cursor:"pointer",top:18,left:-25}})]}),t.jsxs("div",{className:"w-full flex flex-col justify-center items-center pt-4",children:[t.jsx("div",{className:"self-start block text-sm font-medium text-slate-600",children:"選択肢"}),s.choices.map(e=>t.jsxs("div",{className:"w-full relative",children:[t.jsxs("div",{className:"w-full flex justify-between",children:[t.jsx("input",{className:"w-full text-sm border-none hover:shadow focus:ring-0 bg-gray-50 text-gray-900 placeholder-gray-300",value:e.content,placeholder:"選択肢を入力してください",onChange:i=>h(i,e)}),t.jsx("button",{className:"text-center text-red-200 transition-all hover:text-red-500 px-1",type:"button",onClick:()=>f(e),children:t.jsx(v,{className:"text-sm"})})]}),t.jsx(C,{nodeId:r,choice:e}),t.jsx(b,{id:e.id,type:"source",position:n.Right,connectionLimit:1,style:{top:18,right:-25}})]},e.id))]}),t.jsx("div",{className:"w-full mt-4",children:s.choices.length<6&&t.jsxs("button",{className:"text-gray-600 border border-gray-600 hover:text-gray-300 hover:border-gray-300 font-bold mt-1 w-full text-[0.8rem] py-1 flex justify-center items-center gap-1 transition-all",onClick:()=>x(),children:[t.jsx(N,{}),t.jsx("p",{children:"選択肢追加"})]})})]})]})},Q=o.memo(F);export{Q as default};
