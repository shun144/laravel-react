import{r as w,j as i}from"./app-Djr3pS6i.js";const v=()=>{const[t,n]=w.useState([{id:Date.now(),file:null,previewUrl:null}]),c=(e,l)=>{var o;const a=((o=l.target.files)==null?void 0:o[0])||null;if(a){const h=t.map(r=>{if(r.id===e){const s=new FileReader;return s.onloadend=()=>{n(m=>m.map(d=>d.id===e?{...d,previewUrl:s.result}:d))},s.readAsDataURL(a),{...r,file:a}}return r});n(h)}},p=()=>{n([...t,{id:Date.now(),file:null,previewUrl:null}])},u=async()=>{const e=new FormData;t.forEach(l=>{l.file&&e.append("images[]",l.file)}),await fetch("/upload",{method:"POST",body:e})};return i.jsxs("div",{children:[t.map(e=>i.jsxs("div",{children:[i.jsx("input",{type:"file",onChange:l=>c(e.id,l)}),e.previewUrl&&i.jsx("img",{src:e.previewUrl,alt:"Preview",style:{width:"100px"}})]},e.id)),i.jsx("button",{onClick:p,children:"フォームを追加"}),i.jsx("div",{children:i.jsx("button",{onClick:u,disabled:t.every(e=>!e.file),children:"保存"})}),t.every(e=>!e.file)&&i.jsx("div",{children:"test"})]})};export{v as default};
