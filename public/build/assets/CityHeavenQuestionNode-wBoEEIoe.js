import{r as o,j as t}from"./app-B1oAU71M.js";import{b as f,H as p,P as g}from"./index-yDS8Rn3N.js";import b from"./ChoiceSourceHandle-m-DCmE0f.js";import{g as j}from"./utils-THMbrl24.js";import{u as v}from"./store-IRd2lIMQ.js";import{F as N,a as w}from"./index-CjQdlD9o.js";import{G as y}from"./iconBase-Cnwwn6vk.js";import C from"./SalesPointSelect-H0xcsnCs.js";import{showContextMenu as k}from"./FlowMenu-D9ayGoYf.js";import"./react-ActrPT8f.js";import"./ReactContexify.min-Bi-ySt6L.js";function P(l){return y({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M3 9.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"},child:[]}]})(l)}const H=({id:l,data:s})=>{const n=v(e=>e.firstNodeId),{setEdges:d,updateNodeData:r}=f(),m=o.useCallback(e=>{r(l,{...s,topic:e.currentTarget.value})},[r,l,s]),u=()=>{const e=j();r(l,{...s,choices:[...s.choices,{id:e,content:"",salePoints:[]}]})},x=o.useCallback((e,i)=>{if(s.choices.length>6)return;const a=e.currentTarget.value;r(l,{...s,choices:s.choices.map(c=>c.id===i.id?{...c,content:a}:c)})},[r,l,s]),h=o.useCallback(e=>{s.choices.length<=1||(r(l,{...s,choices:s.choices.filter(i=>i.id!=e.id)}),d(i=>i.filter(a=>a.sourceHandle!=e.id)))},[r,l,s]);return t.jsxs("div",{className:`rounded-md w-96 bg-slate-900 shadow-lg ${n===l&&"border-2 border-orange-300"}`,children:[t.jsx("div",{className:"h-10 custom-drag-handle rounded-t-md bg-indigo-500 flex justify-end items-center pr-2 transition-all hover:bg-indigo-600",children:t.jsx(P,{className:"w-6 h-full text-slate-200 text-md cursor-pointer transition-all hover:text-slate-50 hover:bg-indigo-400",onClick:e=>k(e,l)})}),t.jsxs("div",{className:"flex flex-col justify-center items-center cursor-default pt-3 pb-6 px-3",children:[t.jsxs("div",{className:"w-full flex flex-col justify-center items-center relative",children:[t.jsx("label",{htmlFor:"message",className:"self-start block text-md font-semibold text-indigo-500",children:"質 問"}),t.jsx("textarea",{id:"message",rows:3,className:"block resize-none p-2.5 w-full text-md text-slate-200 placeholder-slate-500 bg-slate-800 rounded-sm border-1 ring-0 border-slate-400 focus:ring-0 focus:border-slate-200",value:s.topic,onChange:e=>m(e),placeholder:"質問内容を入力してください"}),t.jsx(p,{id:l,position:g.Left,type:"target",style:{cursor:"pointer",top:18,left:-25}})]}),t.jsxs("div",{className:"w-full flex flex-col justify-center items-center pt-6",children:[t.jsx("div",{className:"self-start block text-md font-semibold text-indigo-500",children:"選 択 肢"}),s.choices.map(e=>t.jsxs("div",{className:"w-full relative",children:[t.jsxs("div",{className:"w-full flex justify-between",children:[t.jsx("input",{className:"w-full text-lg hover:shadow text-slate-200  placeholder-slate-500 bg-slate-800 rounded-sm border-1 ring-0 border-slate-400 focus:ring-0 focus:border-slate-200",value:e.content,placeholder:"選択肢を入力してください",onChange:i=>x(i,e)}),t.jsx("button",{className:"text-center text-slate-600 transition-all hover:text-red-300 px-1",type:"button",onClick:()=>h(e),children:t.jsx(N,{className:"text-sm"})})]}),t.jsx(C,{nodeId:l,choiceId:e.id,salePoints:e.salePoints}),t.jsx(b,{id:e.id,connectionLimit:1,style:{top:18,right:-25}})]},e.id))]}),t.jsx("div",{className:"w-full mt-4",children:s.choices.length<6&&t.jsxs("button",{className:"text-gray-600 border border-gray-600 hover:text-gray-300 hover:border-gray-300 font-bold mt-1 w-full text-[0.8rem] py-1 flex justify-center items-center gap-1 transition-all",onClick:()=>u(),children:[t.jsx(w,{}),t.jsx("p",{children:"選択肢追加"})]})})]})]})},Q=o.memo(H);export{Q as default};
