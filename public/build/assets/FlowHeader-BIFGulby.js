import{r as l,j as e,y as E}from"./app-BpPJ0wDp.js";import{u as a}from"./store-BmW2zk-D.js";import{u as F}from"./index-xtGAtnNo.js";import{n as o}from"./index-x-fziZDy.js";import"./react-mw6vdnkP.js";const H=({id:u,initialTitle:x,initialUrl:m})=>{const[n,f]=l.useState(x),[i,h]=l.useState(m),[r,d]=l.useState({}),{getNodes:p,getEdges:g}=F(),b=a(t=>t.firstNodeId),w=a(t=>t.setIsDirty);a(t=>t.isDirty);const N=t=>{t.preventDefault();const c=p(),v=g(),y=c.filter(s=>s.type==="cityHeavenQuestionNode"),j=c.filter(s=>s.type==="cityHeavenResultNode");E.post(`/flow/${u}`,{update_questions:JSON.stringify(y),update_results:JSON.stringify(j),update_edges:JSON.stringify(v),first_question_id:b,title:n,url:i},{onSuccess:()=>{d({}),o.success("保存しました",{duration:4e3}),w(!1)},onError:s=>{d(s),o.error("保存に失敗しました",{duration:5e3});for(const S of Object.values(s))o.error(S,{duration:5e3})}})};return e.jsx("div",{className:"h-14 w-full bg-white",children:e.jsxs("form",{onSubmit:N,className:"w-full flex justify-around items-center",children:[e.jsx("div",{className:"w-20 h-full",children:e.jsx("button",{className:"w-full h-full  bg-indigo-500 px-2 text-white rounded shadow transition-all hover:bg-indigo-600 select-none hover:shadow-xl duration-200",children:"保 存"})}),e.jsxs("div",{className:" flex flex-col items-center w-96 ",children:[e.jsxs("div",{className:"flex w-full flex-row items-center",children:[e.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-800 px-3 h-10 leading-10 bg-slate-300 text-center",children:"タイトル"}),e.jsx("input",{type:"text",id:"title",placeholder:"タイトルを入力してください",className:"grow bg-slate-100 border border-transparent text-gray-900 text-sm focus:ring-transparent focus:border-transparent block  p-2.5 h-full placeholder-slate-400 shadow",onChange:t=>f(t.target.value),value:n})]}),e.jsx("div",{children:r.title&&e.jsx("div",{className:"text-sm text-red-500",children:r.title})})]}),e.jsxs("div",{className:"flex flex-row  items-center w-96 bg-slate-200",children:[e.jsx("label",{htmlFor:"url",className:"block text-sm font-medium text-gray-900 px-3",children:"URL"}),e.jsx("input",{type:"text",id:"url",placeholder:"URLを入力してください",className:"bg-slate-100 border border-transparent text-gray-900 text-sm focus:ring-transparent focus:border-transparent block w-full p-2.5 h-full placeholder-slate-400",onChange:t=>h(t.target.value),value:i})]}),r.url&&e.jsx("div",{className:"text-sm text-red-500",children:r.url})]})})},I=l.memo(H);export{I as default};
