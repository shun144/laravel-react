import{r as g,j as e}from"./app-Fxrr18RL.js";import{b,H as f,P as n}from"./index-BdOFtew_.js";import{g as j}from"./utils-DtvS6Fzu.js";import w from"./ChoiceSourceHandle-ClxD4gBg.js";import{F as a,a as v}from"./index-BFep6aaj.js";import"./iconBase-DN5vp9AL.js";const y=({id:i,data:s})=>{const{setEdges:c,updateNodeData:l,deleteElements:d}=b(),h=t=>{l(i,{...s,topic:t.currentTarget.value})},u=()=>{const t=j();l(i,{...s,choices:[...s.choices,{id:t,content:""}]})},p=(t,r)=>{s.choices.length>6||l(i,{...s,choices:s.choices.map(o=>o.id===r.id?{...o,content:t.currentTarget.value}:o)})},x=t=>{s.choices.length<=1||(l(i,{...s,choices:s.choices.filter(r=>r.id!=t.id)}),c(r=>r.filter(o=>o.sourceHandle!=t.id)))},m=()=>{d({nodes:[{id:i}]})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"rounded-t-md min-w-64 px-2",children:[e.jsx("div",{className:"text-white",children:"カスタムフロー用のノードです"}),e.jsx(f,{id:i,position:n.Left,type:"target",style:{cursor:"pointer"}}),e.jsxs("div",{className:"flex flex-col custom-drag-handle",children:[e.jsx("button",{className:"text-white hover:text-red-300 font-bold mb-1 rounded w-fit self-end text-sm",type:"button",onClick:m,children:e.jsx(a,{})}),e.jsx("input",{className:"placeholder-gray-400 rounded-t-md p-1 text-center bg-slate-500 text-white w-full border-none focus:ring-0",value:s.topic,placeholder:"質問を入力してください",onChange:t=>h(t)})]}),e.jsxs("div",{className:"bg-slate-800",children:[s.choices.map((t,r)=>e.jsxs("div",{className:"flex justify-between p-1 text-white bg-slate-800",children:[e.jsx("input",{className:"placeholder-gray-600 border-blue-100 focus:border-blue-400 focus:ring-0 bg-transparent text-white w-full",value:t.content,placeholder:"選択肢を入力してください",onChange:o=>p(o,t)}),e.jsx("button",{className:"rounded-md bg-slate-800 p-1 border border-transparent text-center text-white transition-all shadow-sm hover:shadow-lg focus:bg-slate-700 focus:shadow-none active:bg-slate-700 hover:bg-slate-700 active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button",onClick:()=>x(t),children:e.jsx(a,{className:"text-[10px]"})}),e.jsx(w,{id:t.id,type:"source",position:n.Right,connectionLimit:1,style:{top:75+51*r}})]},t.id)),e.jsx("div",{className:"p-1",children:s.choices.length<6&&e.jsxs("button",{className:"text-gray-600 border border-gray-600 hover:text-gray-300 hover:border-gray-300 font-bold mt-1 w-full text-[10px] py-1 flex justify-center items-center gap-1",onClick:u,children:[e.jsx(v,{}),e.jsx("p",{children:"選択肢追加"})]})})]})]})})},T=g.memo(y);export{T as default};
