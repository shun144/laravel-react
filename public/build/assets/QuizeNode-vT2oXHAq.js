import{b as x,j as t}from"./app-DpxkVMrK.js";import{c as b,H as w,P as r}from"./index-CLsSsi3L.js";import N from"./ChoiceSourceHandleProps-BekoWYbT.js";const v=()=>((async()=>{try{const n=(await x.get("/quize")).data.quize.map(i=>({id:i.quizeNo,position:{x:i.x,y:i.y},data:{topic:i.topic,choices:i.choices},type:"quizeNode"}))}catch(e){console.log(e)}})(),[{quizeNo:"quize-1",topic:"好きな動物は？",choices:[{choiceNo:"quize-1-1",content:"犬"},{choiceNo:"quize-1-2",content:"猫"},{choiceNo:"quize-1-3",content:"うさぎ"},{choiceNo:"quize-1-4",content:"馬"}]}]),f=()=>[{resultNo:"result-1",message:"あなたは良い人です"}],Q=()=>{const s=v().map(n=>({id:n.quizeNo,position:{x:0,y:0},data:n,type:"quizeNode"})),e=f().map(n=>({id:n.resultNo,position:{x:300,y:100},data:n,type:"resultNode"}));return[...s,...e]},H=()=>[{id:"edge-1",type:"smoothstep",source:"quize-1",sourceHandle:"quize-1-1",target:"result-1",targetHandle:"result-1"}],$=(s,e)=>{const n=Math.max(...s.map(i=>parseInt(i.id.replace(e,""))||-99));return`${e}${n+1}`},y=(s,e)=>{const n=Math.max(...s.map(i=>parseInt(i.choiceNo.replace(e,""))||-99));return`${e}${n+1}`},z=({id:s,data:e})=>{const{setEdges:n,updateNodeData:i,deleteElements:l}=b(),u=o=>{i(s,{...e,topic:o.currentTarget.value})},d=()=>{const o=y(e.choices,`${s}-`);i(s,{...e,choices:[...e.choices,{choiceNo:o,content:""}]})},h=(o,c)=>{e.choices.length>=6||i(s,{...e,choices:e.choices.map(a=>a.choiceNo===c?{choiceNo:c,content:o.currentTarget.value}:a)})},p=o=>{e.choices.length<=1||(i(s,{...e,choices:e.choices.filter(c=>c.choiceNo!=o)}),n(c=>c.filter(a=>a.sourceHandle!=o)))},g=()=>{l({nodes:[{id:s}]})};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"rounded-t-md min-w-64",children:[t.jsx(w,{id:s,position:r.Left,type:"target"}),t.jsxs("div",{className:"flex",children:[t.jsx("input",{className:"rounded-t-md p-1 text-center bg-slate-500 text-white w-full",value:e.topic,onChange:o=>u(o)}),t.jsx("button",{className:"rounded-md bg-slate-800 p-2.5 border border-transparent text-center text-sm text-white transition-all shadow-sm hover:shadow-lg focus:bg-slate-700 focus:shadow-none active:bg-slate-700 hover:bg-slate-700 active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button",onClick:g,children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:t.jsx("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"})})})]}),e.choices.map(({choiceNo:o,content:c},a)=>t.jsxs("div",{className:"flex justify-between p-1 text-white bg-slate-800",children:[t.jsx("input",{className:"bg-transparent text-white w-full",value:c,onChange:m=>h(m,o)}),t.jsx("button",{className:"rounded-md bg-slate-800 p-2.5 border border-transparent text-center text-sm text-white transition-all shadow-sm hover:shadow-lg focus:bg-slate-700 focus:shadow-none active:bg-slate-700 hover:bg-slate-700 active:shadow-none disabled:pointer-events-none disabled:opacity-50 disabled:shadow-none",type:"button",onClick:()=>p(o),children:t.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:t.jsx("path",{d:"m11.645 20.91-.007-.003-.022-.012a15.247 15.247 0 0 1-.383-.218 25.18 25.18 0 0 1-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0 1 12 5.052 5.5 5.5 0 0 1 16.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 0 1-4.244 3.17 15.247 15.247 0 0 1-.383.219l-.022.012-.007.004-.003.001a.752.752 0 0 1-.704 0l-.003-.001Z"})})}),t.jsx(N,{id:o,type:"source",position:r.Right,connectionLimit:1,style:{top:56+51*a}})]},o)),t.jsx("button",{className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",onClick:d,children:"追加"})]})})},R=Object.freeze(Object.defineProperty({__proto__:null,default:z},Symbol.toStringTag,{value:"Module"}));export{z as Q,H as a,$ as b,R as c,Q as g};
