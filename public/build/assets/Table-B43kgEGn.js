import{r as a,j as e}from"./app-C41IwStY.js";import b from"./HorizontalBarChart-io9U2LN5.js";import{u as j,D as f,f as d,c as N,g as S,a as v,b as w,d as y}from"./index-CKbayV7W.js";import{I as C}from"./index-lVYiszkd.js";import"./useQuery-nPC8Bvmk.js";import"./utils-Ba_Tzi-J.js";import"./iconBase-eW_aHRkL.js";const r=N(),R=({flows:g})=>{var c;const[n,x]=a.useState({}),[m,u]=a.useState([]),[i,p]=a.useState(""),h=t=>{x(s=>({...s,[t]:!s[t]}))},o=a.useMemo(()=>[r.accessor("id",{header:"ID",size:20}),r.accessor("category",{header:"診断タイプ",size:25,cell:({getValue:t})=>{const s=t();switch(s){case"standard":return"標準";case"cityHeaven":return"シティヘブン";default:return s}}}),r.accessor("title",{header:"診断タイトル"}),r.accessor("total",{header:"合計",size:35}),r.display({id:"viewGraph",header:"内訳",size:25,cell:({row:t})=>e.jsx("button",{onClick:()=>{h(t.index)},className:`select-none ${n[t.index]?"text-red-400":"text-indigo-400"}`,children:n[t.index]?"閉じる":"表示"})})],[n]),l=j({data:g,columns:o,getCoreRowModel:S(),onSortingChange:u,getSortedRowModel:v(),getFilteredRowModel:w(),getPaginationRowModel:y(),state:{sorting:m,globalFilter:i},defaultColumn:{size:200}});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"max-w-full w-11/12 mx-auto sm:px-6 lg:py-8",children:e.jsx("div",{className:"bg-white overflow-hidden shadow-sm",children:e.jsxs("div",{className:"pb-3 px-6",children:[e.jsxs("div",{className:"flex justify-start items-center h-24",children:[e.jsx("div",{className:"h-12 bg-slate-600 px-2 rounded-l",children:e.jsx(C,{className:"h-full block text-white"})}),e.jsx("div",{className:"h-full flex justify-center items-center",children:e.jsx(f,{value:i??"",handleChange:t=>p(String(t)),className:"w-96 h-12 bg-transparent outline-none border rounded-r border-slate-300 focus:ring-0 focus:border-blue-500 placeholder:text-slate-400",placeholder:"検索"})})]}),e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500",children:[e.jsx("thead",{className:"text-sm text-gray-700 uppercase bg-gray-200 ",children:l.getHeaderGroups().map(t=>e.jsx("tr",{children:t.headers.map(s=>e.jsx("th",{colSpan:s.colSpan,style:{maxWidth:s.getSize()},children:s.isPlaceholder?null:e.jsxs("div",{className:`
                                px-3 py-3
                                ${s.column.getCanSort()?"cursor-pointer select-none":""}`,onClick:s.column.getToggleSortingHandler(),title:s.column.getCanSort()?s.column.getNextSortingOrder()==="asc"?"Sort ascending":s.column.getNextSortingOrder()==="desc"?"Sort descending":"Clear sort":void 0,children:[d(s.column.columnDef.header,s.getContext()),{asc:"↑",desc:"↓"}[s.column.getIsSorted()]??null]})},s.id))},t.id))}),e.jsx("tbody",{children:(c=l.getRowModel().rows)!=null&&c.length?l.getRowModel().rows.map(t=>e.jsxs(a.Fragment,{children:[e.jsx("tr",{"data-state":t.getIsSelected()&&"selected",className:"bg-white border-b ",children:t.getVisibleCells().map(s=>e.jsx("td",{className:"px-2 py-2",style:{maxWidth:`${s.column.getSize()}px`,overflow:"hidden",overflowWrap:"break-word"},children:d(s.column.columnDef.cell,s.getContext())},s.id))},t.id),n[t.index]&&e.jsx("tr",{children:e.jsx("td",{colSpan:o.length,className:"p-4",children:e.jsx(b,{flowId:t.original.id},t.id)})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:o.length,className:"h-24 text-center",children:"対象レコード0件"})})})]}),e.jsxs("div",{className:"flex items-center justify-center mt-4 gap-8",children:[e.jsxs("div",{className:"w-12 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>l.previousPage(),disabled:!l.getCanPreviousPage(),className:"p-1 border border-gray-300 px-2 disabled:opacity-30 select-none cursor-pointer",children:"<"}),e.jsx("button",{onClick:()=>l.nextPage(),disabled:!l.getCanNextPage(),className:"p-1 border border-gray-300 px-2 disabled:opacity-30 select-none cursor-pointer",children:">"})]}),e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"text-gray-500",children:`${l.getState().pagination.pageIndex+1} / ${l.getPageCount()}`})}),e.jsx("select",{value:l.getState().pagination.pageSize,onChange:t=>l.setPageSize(Number(t.currentTarget.value)),className:"py-2 pr-8 bg-transparent cursor-pointer select-none border-1 border-slate-200 focus:ring-0 focus:border-blue-500 text-sm",children:[10,20,30,50].map(t=>e.jsx("option",{value:t,children:`${t} 行表示`},t))})]})]})})})})},T=a.memo(R);export{T as default};
