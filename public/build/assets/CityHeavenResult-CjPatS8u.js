import{q as D,r as g,b as j,j as t}from"./app-Po51A7Cn.js";import{u as _}from"./store-CGTofLqS.js";import G from"./ResetButton-Bcmi6yV9.js";/* empty css                */import k from"./Skelton-BgYImcfB.js";import{u as v}from"./useQuery-CTSXLNFb.js";import R from"./GirlsView-BcuohaYB.js";import E from"./ApiError-CNMZrBd0.js";import"./react-bkPmn1Wh.js";import"./index-BBZ6V2VK.js";import"./iconBase-CtQAnfA3.js";import"./utils-CvcR3l7b.js";import"./index-Ay0O9Fdk.js";const F=({answerHistories:o})=>{var p,m;const{url:a}=D(),{id:l}=_(s=>s.currentQuestionnarie),i=async()=>{const s=window.location.origin;return(await j.get(`${s}${a}/cityheaven`)).data.girlsData},c=s=>{const n={};o.forEach(({salesPointNos:e})=>{e.forEach(r=>{n[r]=(n[r]||0)+1})});const d=s.map(e=>{const r=e.salespoint_ids.reduce((w,x)=>w+(n[x]||0),0);return{...e,earn_point:r}});return d.sort((e,r)=>r.today_work_flg!==e.today_work_flg?r.today_work_flg?1:-1:r.earn_point!==e.earn_point?r.earn_point-e.earn_point:r.diary_flg!==e.diary_flg?r.diary_flg?1:-1:r.review_flg!==e.review_flg?r.review_flg?1:-1:r.w_shukkin.filter(Boolean).length-e.w_shukkin.filter(Boolean).length),d},{data:u,isFetching:y,error:f}=v({queryKey:[`RespondentGirlsData${l}`],queryFn:i,staleTime:1e3*60*5,retry:!1}),h=(m=(p=f==null?void 0:f.response)==null?void 0:p.data)==null?void 0:m.message;return{processedGirlsData:g.useMemo(()=>u?c(u):[],[u,o]),isFetching:y,errorMessage:h}},$=()=>{const o=_(c=>c.answerHistories),{processedGirlsData:a,isFetching:l,errorMessage:i}=F({answerHistories:o});return i?t.jsx(E,{errorMessage:i}):l?t.jsx(k,{}):t.jsx(t.Fragment,{children:t.jsxs("div",{className:"h-full w-full flex flex-col justify-start items-center",children:[t.jsx(R,{girlsData:a}),t.jsx(G,{})]})})},W=g.memo($);export{W as default};
