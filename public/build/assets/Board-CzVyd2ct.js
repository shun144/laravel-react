import{r as t,j as n}from"./app-C_Xrtwlj.js";import{u as w,a as R,c as z,d as S,r as D,i as q,S as A,B,b as I,C as Q}from"./index-BT8X15fu.js";/* empty css              */import{g as T,Q as V,a as F,b as M}from"./QuizeNode-7eqdxfTx.js";import G from"./ResultNode-ZIJTC0xI.js";import{D as L}from"./core.esm-CkJMYODm.js";import{Draggable as O}from"./Draggable-DjzUlg_6.js";import{Droppable as P}from"./Droppable-DcZcASjM.js";import"./ChoiceSourceHandleProps-CROI-QGx.js";import"./DraggableBlockSource-ChegawJR.js";const X=T(),Y=M(),se=()=>{const[u,p,g]=w(X),[m,c,x]=R(Y),{screenToFlowPosition:f,getNodes:N,getEdges:_}=z(),b=t.useMemo(()=>({quizeNode:V,resultNode:G}),[]),i=t.useRef(!0),h=t.useCallback(s=>{c(e=>S({...s,type:"smoothstep"},e))},[]),C=t.useCallback(()=>{i.current=!1},[]),E=t.useCallback((s,e)=>{i.current=!0,c(o=>D(s,e,o))},[]),j=t.useCallback((s,e)=>{i.current||c(o=>o.filter(a=>a.id!==e.id)),i.current=!0},[]),y=t.useCallback((s,e)=>{const o=F(N(),"quize-"),a=`${o}-1`,r={id:o,data:{quizeNo:o,x:s,y:e,topic:"",choices:[{choiceNo:a,content:""}]},position:{x:s,y:e},type:"quizeNode"};p(d=>d.concat(r))},[]),k=t.useCallback(({active:s,over:e,delta:o,activatorEvent:a})=>{if(!(e==null||e.id!="droppableA")&&a instanceof MouseEvent){const r=a.pageX+o.x,d=a.pageY+o.y,l=f({x:r,y:d});y(l.x,l.y)}},[]);return n.jsx("div",{className:"flex h-full",children:n.jsxs(L,{onDragEnd:k,children:[n.jsx("div",{className:"bg-green-200 w-[10%] min-w-40",children:n.jsx(O,{id:"draggableA",label:"質問追加"})}),n.jsx(P,{id:"droppableA",children:n.jsxs(q,{nodes:u,edges:m,nodeTypes:b,edgeTypes:{smoothstep:A},onEdgesChange:x,onNodesChange:g,fitView:!0,fitViewOptions:{padding:.4},snapToGrid:!0,onReconnect:E,onReconnectStart:C,onReconnectEnd:j,onConnect:h,children:[n.jsx(B,{color:"#222",variant:I.Lines}),n.jsx(Q,{})]})})]})})};export{se as default};
