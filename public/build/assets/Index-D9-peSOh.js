import{b as l,r as g,q as x,j as t,Y as h}from"./app-Djr3pS6i.js";import y from"./NotFound-oOgibHtj.js";import j from"./CountQuestion-DLy1YWIC.js";import Q from"./RecommendScore-LWaOXGk6.js";import I from"./Header-DuZS2Ujs.js";import N from"./Footer-CJTfiXX8.js";import{u as q}from"./store-Bq1QNMyR.js";import"./index-E5esLsEc.js";import"./iconBase-DKpWyc9o.js";import"./react-5W0nFZLx.js";import"./index-D-odvto4.js";const w=async e=>(await l.get(`/aaa/${e}/firstQuestionId`,{params:{flow_url:e}})).data,F=async e=>{try{const r=await l.get(`/aaa/${e}/questionnaire`,{params:{flow_url:e}}),i=JSON.parse(r.data.questions),n=JSON.parse(r.data.results),c=JSON.parse(r.data.edges),u=i.map(s=>({id:s.id,topic:s.data.topic,choices:s.data.choices.map(o=>{var a;return{id:o.id,content:o.content,salesPoints:o.salePoints,nextId:(a=c.find(m=>m.sourceHandle===o.id))==null?void 0:a.targetHandle}}),category:"question"})),d=n.map(s=>({id:s.id,result:s.data.result,message:s.data.message,img:s.data.img,url:s.data.url,category:"result"}));return[...u,...d]}catch(r){return console.log(r),[]}},v=()=>{const{flowUrl:e}=x().props,{setQuestionnarieDatas:r,setCurrentQuestionnarie:i,currentQuestionnarie:n,setIsLoading:c,isLoading:u,setBaseGirlDataList:d,setisGirlsLoading:s,setFirstQuestionId:o}=q();return g.useEffect(()=>{(async()=>{try{const a=w(e),m=F(e),[p,f]=await Promise.all([a,m]);r(f),o(p),i(p),c(!1)}catch{}})(),(async()=>{try{const a=await l.get(`${e}/test`);d(a.data.resultArray),s(!1)}catch{s(!0)}})()},[]),t.jsxs(t.Fragment,{children:[t.jsx(h,{title:"診断"}),t.jsxs("div",{className:"w-screen h-screen overflow-auto bg-amber-50",children:[t.jsx("div",{className:"h-[5%] min-h-[45px]",children:t.jsx(I,{})}),t.jsx("div",{className:"min-h-[550px] md:min-h-[800px]",children:!u&&t.jsxs(t.Fragment,{children:[n.category==="question"&&t.jsx(j,{}),n.category==="result"&&t.jsx(Q,{}),n.category==="none"&&t.jsx(y,{})]})}),t.jsx("div",{className:"h-[5%] min-h-[45px] ",children:t.jsx(N,{})})]})]})},C=g.memo(v);export{C as default};
